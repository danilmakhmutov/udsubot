import logging
import asyncio
import os
from aiogram import Bot, Dispatcher, types, F
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton
from aiogram.filters import Command
from dotenv import load_dotenv
import sqlite3
import requests
from bs4 import BeautifulSoup
import json
from datetime import datetime, timedelta
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv(".env")
TOKEN = os.getenv("BOT_TOKEN")

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
bot = Bot(token=TOKEN)
dp = Dispatcher()

# –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
main_menu = ReplyKeyboardMarkup(
    keyboard=[
        [KeyboardButton(text="üìö –§–∞–∫—É–ª—å—Ç–µ—Ç—ã –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è")],
        [KeyboardButton(text="üóì –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ"), KeyboardButton(text="üì¢ –ù–æ–≤–æ—Å—Ç–∏")],
        [KeyboardButton(text="üçΩ –ú–µ–Ω—é —Å—Ç–æ–ª–æ–≤–æ–π"), KeyboardButton(text="üîî –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è")],
        [KeyboardButton(text="üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏")]  # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –∫–Ω–æ–ø–∫—É
    ],
    resize_keyboard=True
)

# –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
user_schedules = {}

# –ú–µ–Ω—é —Å—Ç–æ–ª–æ–≤–æ–π –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
menu = {
    "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫": {
        "–ù–∞–ø–∏—Ç–∫–∏": ["–ß–∞–π —á–µ—Ä–Ω—ã–π - 30‚ÇΩ", "–ß–∞–π –∑–µ–ª–µ–Ω—ã–π - 30‚ÇΩ", "–ö–æ—Ñ–µ –∞–º–µ—Ä–∏–∫–∞–Ω–æ - 50‚ÇΩ", "–ö–æ–º–ø–æ—Ç - 35‚ÇΩ", "–ú–æ—Ä—Å - 40‚ÇΩ"],
        "–ë–ª—é–¥–∞": [
            "–°—É–ø –≥–æ—Ä–æ—Ö–æ–≤—ã–π - 120‚ÇΩ", "–ü—é—Ä–µ —Å –∫–æ—Ç–ª–µ—Ç–æ–π - 150‚ÇΩ", 
            "–ì—Ä–µ—á–∫–∞ —Å –≥—Ä–∏–±–∞–º–∏ - 130‚ÇΩ", "–°–∞–ª–∞—Ç –æ–≤–æ—â–Ω–æ–π - 80‚ÇΩ",
            "–ú–∞–∫–∞—Ä–æ–Ω—ã –ø–æ-—Ñ–ª–æ—Ç—Å–∫–∏ - 140‚ÇΩ", "–ö—É—Ä–∏—Ü–∞ –∑–∞–ø–µ—á–µ–Ω–Ω–∞—è - 160‚ÇΩ",
            "–†—ã–±–∞ –Ω–∞ –ø–∞—Ä—É - 170‚ÇΩ", "–ü–ª–æ–≤ - 150‚ÇΩ",
            "–û–º–ª–µ—Ç —Å –æ–≤–æ—â–∞–º–∏ - 110‚ÇΩ", "–ë–æ—Ä—â - 130‚ÇΩ"
        ],
        "–í—ã–ø–µ—á–∫–∞": ["–ë—É–ª–æ—á–∫–∞ —Å –º–∞–∫–æ–º - 50‚ÇΩ", "–ü–∏—Ä–æ–∂–æ–∫ —Å –∫–∞–ø—É—Å—Ç–æ–π - 45‚ÇΩ", "–ö—Ä—É–∞—Å—Å–∞–Ω - 60‚ÇΩ", "–ü–∏—Ä–æ–∂–Ω–æ–µ –∫–∞—Ä—Ç–æ—à–∫–∞ - 55‚ÇΩ", "–ü–æ–Ω—á–∏–∫ - 40‚ÇΩ"]
    },
    "–í—Ç–æ—Ä–Ω–∏–∫": {
        "–ù–∞–ø–∏—Ç–∫–∏": ["–ö–∞–∫–∞–æ - 45‚ÇΩ", "–ß–∞–π —Å –ª–∏–º–æ–Ω–æ–º - 35‚ÇΩ", "–ö–æ—Ñ–µ –ª–∞—Ç—Ç–µ - 70‚ÇΩ", "–°–æ–∫ –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π - 60‚ÇΩ", "–õ–∏–º–æ–Ω–∞–¥ - 50‚ÇΩ"],
        "–ë–ª—é–¥–∞": [
            "–©–∏ - 120‚ÇΩ", "–ì—Ä–µ—á–∫–∞ —Å –∫—É—Ä–∏—Ü–µ–π - 150‚ÇΩ", 
            "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –∂–∞—Ä–µ–Ω—ã–π - 130‚ÇΩ", "–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä—å - 110‚ÇΩ",
            "–°–ø–∞–≥–µ—Ç—Ç–∏ –±–æ–ª–æ–Ω—å–µ–∑–µ - 160‚ÇΩ", "–ì—É–ª—è—à —Å –≥–∞—Ä–Ω–∏—Ä–æ–º - 170‚ÇΩ",
            "–ö–æ—Ç–ª–µ—Ç–∞ –ø–æ-–∫–∏–µ–≤—Å–∫–∏ - 180‚ÇΩ", "–†–∞–≥—É –æ–≤–æ—â–Ω–æ–µ - 120‚ÇΩ",
            "–°—ã—Ä–Ω–∏–∫–∏ - 100‚ÇΩ", "–°–æ–ª—è–Ω–∫–∞ - 140‚ÇΩ"
        ],
        "–í—ã–ø–µ—á–∫–∞": ["–ü–∏—Ä–æ–∂–æ–∫ —Å —è–±–ª–æ–∫–æ–º - 45‚ÇΩ", "–ö–µ–∫—Å - 55‚ÇΩ", "–≠–∫–ª–µ—Ä - 65‚ÇΩ", "–ü–∏—Ä–æ–∂–Ω–æ–µ –Ω–∞–ø–æ–ª–µ–æ–Ω - 70‚ÇΩ", "–ë–∞–≥–µ—Ç - 40‚ÇΩ"]
    },
    "–°—Ä–µ–¥–∞": {
        "–ù–∞–ø–∏—Ç–∫–∏": ["–ß–∞–π —Ñ—Ä—É–∫—Ç–æ–≤—ã–π - 40‚ÇΩ", "–ö–æ—Ñ–µ –∫–∞–ø—É—á–∏–Ω–æ - 65‚ÇΩ", "–ú–æ–ª–æ—á–Ω—ã–π –∫–æ–∫—Ç–µ–π–ª—å - 80‚ÇΩ", "–ö–æ–º–ø–æ—Ç —è–≥–æ–¥–Ω—ã–π - 45‚ÇΩ", "–ì–æ—Ä—è—á–∏–π —à–æ–∫–æ–ª–∞–¥ - 60‚ÇΩ"],
        "–ë–ª—é–¥–∞": [
            "–°—É–ø –∫—É—Ä–∏–Ω—ã–π - 125‚ÇΩ", "–†–∏—Å —Å –æ–≤–æ—â–∞–º–∏ - 140‚ÇΩ", 
            "–ö–æ—Ç–ª–µ—Ç–∞ —Ä—ã–±–Ω–∞—è - 150‚ÇΩ", "–°–∞–ª–∞—Ç –≥—Ä–µ—á–µ—Å–∫–∏–π - 120‚ÇΩ",
            "–õ–∞–∑–∞–Ω—å—è - 170‚ÇΩ", "–ì–æ–ª—É–±—Ü—ã - 160‚ÇΩ",
            "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –∑–∞–ø–µ—á–µ–Ω–Ω—ã–π - 130‚ÇΩ", "–§–∞—Ä—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–µ—Ä–µ—Ü - 150‚ÇΩ",
            "–û–ª–∞–¥—å–∏ - 90‚ÇΩ", "–£—Ö–∞ - 140‚ÇΩ"
        ],
        "–í—ã–ø–µ—á–∫–∞": ["–ü–∏—Ä–æ–∂–æ–∫ —Å –≤–∏—à–Ω–µ–π - 50‚ÇΩ", "–ö—Ä—É–∞—Å—Å–∞–Ω —Å —à–æ–∫–æ–ª–∞–¥–æ–º - 70‚ÇΩ", "–ü–µ—á–µ–Ω—å–µ –æ–≤—Å—è–Ω–æ–µ - 40‚ÇΩ", "–ü–∏—Ä–æ–∂–Ω–æ–µ –º–µ–¥–æ–≤–∏–∫ - 75‚ÇΩ", "–ë—É–ª–æ—á–∫–∞ —Å –∫–æ—Ä–∏—Ü–µ–π - 55‚ÇΩ"]
    },
    "–ß–µ—Ç–≤–µ—Ä–≥": {
        "–ù–∞–ø–∏—Ç–∫–∏": ["–ß–∞–π —Å –º—è—Ç–æ–π - 35‚ÇΩ", "–ö–æ—Ñ–µ –º–æ–∫–∫–æ - 75‚ÇΩ", "–°–æ–∫ —è–±–ª–æ—á–Ω—ã–π - 55‚ÇΩ", "–ú–æ—Ä—Å –∫–ª—é–∫–≤–µ–Ω–Ω—ã–π - 45‚ÇΩ", "–≠—Å–ø—Ä–µ—Å—Å–æ - 50‚ÇΩ"],
        "–ë–ª—é–¥–∞": [
            "–ë–æ—Ä—â —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π - 140‚ÇΩ", "–ü–µ–ª—å–º–µ–Ω–∏ - 150‚ÇΩ", 
            "–ì—Ä–µ—á–∫–∞ —Å –≥—Ä–∏–±–∞–º–∏ - 130‚ÇΩ", "–°–∞–ª–∞—Ç –æ–ª–∏–≤—å–µ - 110‚ÇΩ",
            "–ö—É—Ä–∏—Ü–∞ –≥—Ä–∏–ª—å - 170‚ÇΩ", "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ –ø—é—Ä–µ - 120‚ÇΩ",
            "–†—ã–±–∞ –∂–∞—Ä–µ–Ω–∞—è - 160‚ÇΩ", "–û–≤–æ—â–∏ –≥—Ä–∏–ª—å - 130‚ÇΩ",
            "–°—ã—Ä–Ω—ã–π —Å—É–ø - 135‚ÇΩ", "–ë–ª–∏–Ω—ã —Å –º—è—Å–æ–º - 140‚ÇΩ"
        ],
        "–í—ã–ø–µ—á–∫–∞": ["–ü–∏—Ä–æ–∂–æ–∫ —Å –∫–∞—Ä—Ç–æ—à–∫–æ–π - 45‚ÇΩ", "–ö—Ä—É–∞—Å—Å–∞–Ω —Å –º–∏–Ω–¥–∞–ª–µ–º - 75‚ÇΩ", "–ü–æ–Ω—á–∏–∫ —Å –≥–ª–∞–∑—É—Ä—å—é - 50‚ÇΩ", "–ü–∏—Ä–æ–∂–Ω–æ–µ –ø—Ç–∏—á—å–µ –º–æ–ª–æ–∫–æ - 80‚ÇΩ", "–ë—É–ª–æ—á–∫–∞ —Å –∏–∑—é–º–æ–º - 50‚ÇΩ"]
    },
    "–ü—è—Ç–Ω–∏—Ü–∞": {
        "–ù–∞–ø–∏—Ç–∫–∏": ["–ß–∞–π —Å –∂–∞—Å–º–∏–Ω–æ–º - 40‚ÇΩ", "–ö–æ—Ñ–µ —Ä–∞—Ñ - 80‚ÇΩ", "–°–æ–∫ —Ç–æ–º–∞—Ç–Ω—ã–π - 50‚ÇΩ", "–ö–æ–º–ø–æ—Ç –∏–∑ —Å—É—Ö–æ—Ñ—Ä—É–∫—Ç–æ–≤ - 40‚ÇΩ", "–õ–∞—Ç—Ç–µ –º–∞–∫–∏–∞—Ç–æ - 85‚ÇΩ"],
        "–ë–ª—é–¥–∞": [
            "–°—É–ø-–ø—é—Ä–µ –≥—Ä–∏–±–Ω–æ–π - 145‚ÇΩ", "–ü–ª–æ–≤ —Å –±–∞—Ä–∞–Ω–∏–Ω–æ–π - 180‚ÇΩ", 
            "–ú–∞–∫–∞—Ä–æ–Ω—ã —Å —Å—ã—Ä–æ–º - 130‚ÇΩ", "–°–∞–ª–∞—Ç —Å —Ç—É–Ω—Ü–æ–º - 125‚ÇΩ",
            "–°—Ç–µ–π–∫ –∏–∑ —Å–µ–º–≥–∏ - 220‚ÇΩ", "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –ø–æ-–¥–µ—Ä–µ–≤–µ–Ω—Å–∫–∏ - 140‚ÇΩ",
            "–ö—É—Ä–∏–Ω—ã–µ –Ω–∞–≥–≥–µ—Ç—Å—ã - 150‚ÇΩ", "–û–≤–æ—â–Ω–∞—è –∑–∞–ø–µ–∫–∞–Ω–∫–∞ - 135‚ÇΩ",
            "–°—É–ø —Ö–∞—Ä—á–æ - 150‚ÇΩ", "–ë–ª–∏–Ω—á–∏–∫–∏ —Å —Ç–≤–æ—Ä–æ–≥–æ–º - 120‚ÇΩ"
        ],
        "–í—ã–ø–µ—á–∫–∞": ["–ü–∏—Ä–æ–∂–æ–∫ —Å –º—è—Å–æ–º - 55‚ÇΩ", "–ö—Ä—É–∞—Å—Å–∞–Ω —Å –∫—Ä–µ–º–æ–º - 80‚ÇΩ", "–ü–µ—á–µ–Ω—å–µ —à–æ–∫–æ–ª–∞–¥–Ω–æ–µ - 45‚ÇΩ", "–ü–∏—Ä–æ–∂–Ω–æ–µ —Ç–∏—Ä–∞–º–∏—Å—É - 90‚ÇΩ", "–ë—É–ª–æ—á–∫–∞ —Å –∫—É–Ω–∂—É—Ç–æ–º - 50‚ÇΩ"]
    },
    "–°—É–±–±–æ—Ç–∞": {
        "–ù–∞–ø–∏—Ç–∫–∏": ["–ß–∞–π —Å –±–µ—Ä–≥–∞–º–æ—Ç–æ–º - 45‚ÇΩ", "–ö–æ—Ñ–µ –ø–æ-–≤–µ–Ω—Å–∫–∏ - 90‚ÇΩ", "–°–æ–∫ –º—É–ª—å—Ç–∏—Ñ—Ä—É–∫—Ç - 60‚ÇΩ", "–ú–æ–ª–æ—á–Ω—ã–π –∫–æ–∫—Ç–µ–π–ª—å —Å –±–∞–Ω–∞–Ω–æ–º - 85‚ÇΩ", "–ö–∞–ø—É—á–∏–Ω–æ —Å —Å–∏—Ä–æ–ø–æ–º - 95‚ÇΩ"],
        "–ë–ª—é–¥–∞": [
            "–°—É–ø —Ç–æ–º —è–º - 180‚ÇΩ", "–ü–∞—Å—Ç–∞ –∫–∞—Ä–±–æ–Ω–∞—Ä–∞ - 190‚ÇΩ", 
            "–°—Ç–µ–π–∫ –∏–∑ –≥–æ–≤—è–¥–∏–Ω—ã - 250‚ÇΩ", "–°–∞–ª–∞—Ç —Å –∫—Ä–µ–≤–µ—Ç–∫–∞–º–∏ - 200‚ÇΩ",
            "–†–∏–∑–æ—Ç—Ç–æ - 170‚ÇΩ", "–õ–æ—Å–æ—Å—å –Ω–∞ –≥—Ä–∏–ª–µ - 230‚ÇΩ",
            "–§–æ–Ω–¥—é - 210‚ÇΩ", "–†–∞—Ç–∞—Ç—É–π - 160‚ÇΩ",
            "–°—É–ø —Ñ–æ –±–æ - 175‚ÇΩ", "–¢–æ—Ä—Ç–∏–ª—å—è - 150‚ÇΩ"
        ],
        "–í—ã–ø–µ—á–∫–∞": ["–ö—Ä—É–∞—Å—Å–∞–Ω —Å –≤–µ—Ç—á–∏–Ω–æ–π - 90‚ÇΩ", "–ß–∏–∑–∫–µ–π–∫ - 120‚ÇΩ", "–ú–∞—Ñ—Ñ–∏–Ω —à–æ–∫–æ–ª–∞–¥–Ω—ã–π - 70‚ÇΩ", "–≠–∫–ª–µ—Ä —Å –∑–∞–≤–∞—Ä–Ω—ã–º –∫—Ä–µ–º–æ–º - 80‚ÇΩ", "–¢–∞—Ä—Ç–∞–ª–µ—Ç–∫–∞ —Å —Ñ—Ä—É–∫—Ç–∞–º–∏ - 100‚ÇΩ"]
    },
    "–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ": {
        "–ù–∞–ø–∏—Ç–∫–∏": ["–ß–∞–π —Ç—Ä–∞–≤—è–Ω–æ–π - 40‚ÇΩ", "–ö–æ—Ñ–µ –≥–ª—è—Å–µ - 100‚ÇΩ", "–°–æ–∫ –≥—Ä–∞–Ω–∞—Ç–æ–≤—ã–π - 70‚ÇΩ", "–ú–æ—Ö–∏—Ç–æ –±–µ–∑–∞–ª–∫–æ–≥–æ–ª—å–Ω—ã–π - 90‚ÇΩ", "–ö–∞–∫–∞–æ —Å –∑–µ—Ñ–∏—Ä–æ–º - 85‚ÇΩ"],
        "–ë–ª—é–¥–∞": ["–°—Ç–æ–ª–æ–≤–∞—è –∑–∞–∫—Ä—ã—Ç–∞ - –ø—Ä–∏—Ö–æ–¥–∏—Ç–µ –≤ –±—É–¥–Ω–∏–µ –¥–Ω–∏!"],
        "–í—ã–ø–µ—á–∫–∞": ["–°—Ç–æ–ª–æ–≤–∞—è –∑–∞–∫—Ä—ã—Ç–∞ - –ø—Ä–∏—Ö–æ–¥–∏—Ç–µ –≤ –±—É–¥–Ω–∏–µ –¥–Ω–∏!"]
    }
}

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
def init_db():
    conn = sqlite3.connect("reminders.db")
    cursor = conn.cursor()
    cursor.execute("""
    CREATE TABLE IF NOT EXISTS reminders (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        user_id INTEGER NOT NULL,
        date TEXT NOT NULL,
        text TEXT NOT NULL,
        notified INTEGER DEFAULT 0
    )
    """)
    conn.commit()
    conn.close()

init_db()

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
async def check_reminders():
    while True:
        conn = sqlite3.connect("reminders.db")
        cursor = conn.cursor()
        
        # –ù–∞—Ö–æ–¥–∏–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–µ–≥–æ–¥–Ω—è+1 –¥–µ–Ω—å –∏ –µ—â–µ –Ω–µ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
        tomorrow = (datetime.now() + timedelta(days=1)).strftime("%Y-%m-%d")
        cursor.execute("SELECT * FROM reminders WHERE date = ? AND notified = 0", (tomorrow,))
        reminders = cursor.fetchall()
        
        for reminder in reminders:
            user_id = reminder[1]
            date = reminder[2]
            text = reminder[3]
            
            try:
                await bot.send_message(
                    user_id,
                    f"üîî –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ 1 –¥–µ–Ω—å!\n–î–∞—Ç–∞: {date}\n–°–æ–±—ã—Ç–∏–µ: {text}"
                )
                # –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ
                cursor.execute("UPDATE reminders SET notified = 1 WHERE id = ?", (reminder[0],))
                conn.commit()
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è: {e}")
        
        conn.close()
        await asyncio.sleep(3600)  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 1 —á–∞—Å

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
@dp.message(Command("start"))
async def start(message: types.Message):
    await message.answer("–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç-–ø–æ–º–æ—â–Ω–∏–∫ –£–¥–ì–£. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?", reply_markup=main_menu)

@dp.message(F.text == "üìö –§–∞–∫—É–ª—å—Ç–µ—Ç—ã –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è")
async def faculties_menu(message: types.Message):
    categories_markup = ReplyKeyboardMarkup(
        keyboard=[
            [KeyboardButton(text="üíª IT –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ")],
            [KeyboardButton(text="üßÆ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ —Ñ–∏–∑–∏–∫–∞")],
            [KeyboardButton(text="üé® –ò—Å–∫—É—Å—Å—Ç–≤–æ –∏ –¥–∏–∑–∞–π–Ω")],
            [KeyboardButton(text="üìä –ë–∏–∑–Ω–µ—Å –∏ —ç–∫–æ–Ω–æ–º–∏–∫–∞")],
            [KeyboardButton(text="üåç –ì—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã–µ –Ω–∞—É–∫–∏")],
            [KeyboardButton(text="üî¨ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞—É–∫–∏")],
            [KeyboardButton(text="‚öñÔ∏è –Æ—Ä–∏—Å–ø—Ä—É–¥–µ–Ω—Ü–∏—è")],
            [KeyboardButton(text="üè• –ú–µ–¥–∏—Ü–∏–Ω–∞")],
            [KeyboardButton(text="üèõÔ∏è –ù–∞–∑–∞–¥")]
        ],
        resize_keyboard=True
    )
    await message.answer("–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π:", reply_markup=categories_markup)

@dp.message(F.text == "üèõÔ∏è –ù–∞–∑–∞–¥")
async def back_to_main_from_faculties(message: types.Message):
    await message.answer("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:", reply_markup=main_menu)

@dp.message(F.text == "üíª IT –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ")
async def it_faculties(message: types.Message):
    text = """
üíª *IT –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏:*

üîπ *–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 25
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 240+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 120 000‚ÇΩ/–≥–æ–¥
‚ñ´Ô∏è –ò–∑—É—á–∞–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Python, Java, C++, –∞–ª–≥–æ—Ä–∏—Ç–º—ã, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

üîπ *–ü—Ä–∏–∫–ª–∞–¥–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –≤ –±–∏–∑–Ω–µ—Å–µ
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 20
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 230+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 110 000‚ÇΩ/–≥–æ–¥
‚ñ´Ô∏è –ò–∑—É—á–∞–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: SQL, 1–°, ERP-—Å–∏—Å—Ç–µ–º—ã

üîπ *–ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –ó–∞—â–∏—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 15
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 250+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 130 000‚ÇΩ/–≥–æ–¥
‚ñ´Ô∏è –ò–∑—É—á–∞–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Ethical hacking, –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è

üîπ *–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 10
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 260+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 140 000‚ÇΩ/–≥–æ–¥
‚ñ´Ô∏è –ò–∑—É—á–∞–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: TensorFlow, –Ω–µ–π—Ä–æ—Å–µ—Ç–∏

üéì *–ö–∞—Ä—å–µ—Ä–Ω—ã–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã:* 
- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ (Junior ‚Üí Senior)
- Data Scientist
- –ê–Ω–∞–ª–∏—Ç–∏–∫ –¥–∞–Ω–Ω—ã—Ö
- –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä

üìö *–û—Å–Ω–æ–≤–Ω—ã–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã:*
- –ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ —Å–µ—Ç–∏
- –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
- –í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
"""
    await message.answer(text, parse_mode="Markdown")

@dp.message(F.text == "üßÆ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ —Ñ–∏–∑–∏–∫–∞")
async def math_faculties(message: types.Message):
    text = """
üßÆ *–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ —Ñ–∏–∑–∏–∫–∞ - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏:*

üîπ *–§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –ê–ª–≥–µ–±—Ä–∞ –∏ –≥–µ–æ–º–µ—Ç—Ä–∏—è
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 30
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 220+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 90 000‚ÇΩ/–≥–æ–¥
‚ñ´Ô∏è –ò–∑—É—á–∞–µ–º—ã–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã: –¢–æ–ø–æ–ª–æ–≥–∏—è, —Ç–µ–æ—Ä–∏—è —á–∏—Å–µ–ª

üîπ *–ü—Ä–∏–∫–ª–∞–¥–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 25
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 230+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 100 000‚ÇΩ/–≥–æ–¥
‚ñ´Ô∏è –ò–∑—É—á–∞–µ–º—ã–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã: –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è

üîπ *–§–∏–∑–∏–∫–∞*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–∑–∏–∫–∞
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 20
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 210+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 95 000‚ÇΩ/–≥–æ–¥
‚ñ´Ô∏è –ò–∑—É—á–∞–µ–º—ã–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã: –ö–≤–∞–Ω—Ç–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞

üîπ *–ê—Å—Ç—Ä–æ–Ω–æ–º–∏—è*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –ê—Å—Ç—Ä–æ—Ñ–∏–∑–∏–∫–∞
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 10
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 200+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 85 000‚ÇΩ/–≥–æ–¥

üéì *–ö–∞—Ä—å–µ—Ä–Ω—ã–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã:*
- –ù–∞—É—á–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å
- –ê–Ω–∞–ª–∏—Ç–∏–∫ –¥–∞–Ω–Ω—ã—Ö
- –ò–Ω–∂–µ–Ω–µ—Ä-–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å
"""
    await message.answer(text, parse_mode="Markdown")

@dp.message(F.text == "üé® –ò—Å–∫—É—Å—Å—Ç–≤–æ –∏ –¥–∏–∑–∞–π–Ω")
async def art_faculties(message: types.Message):
    text = """
üé® *–ò—Å–∫—É—Å—Å—Ç–≤–æ –∏ –¥–∏–∑–∞–π–Ω - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏:*

üîπ *–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 15
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –∫–æ–Ω–∫—É—Ä—Å
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 110 000‚ÇΩ/–≥–æ–¥
‚ñ´Ô∏è –ò–∑—É—á–∞–µ–º—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã: Photoshop, Illustrator

üîπ *–î–∏–∑–∞–π–Ω —Å—Ä–µ–¥—ã*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 12
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –∫–æ–Ω–∫—É—Ä—Å
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 115 000‚ÇΩ/–≥–æ–¥
‚ñ´Ô∏è –ò–∑—É—á–∞–µ–º—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã: 3ds Max, AutoCAD

üîπ *–ò–∑—è—â–Ω—ã–µ –∏—Å–∫—É—Å—Å—Ç–≤–∞*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –ñ–∏–≤–æ–ø–∏—Å—å
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 10
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –∫–æ–Ω–∫—É—Ä—Å
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 100 000‚ÇΩ/–≥–æ–¥

üéì *–ö–∞—Ä—å–µ—Ä–Ω—ã–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã:*
- –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω–µ—Ä
- UX/UI –¥–∏–∑–∞–π–Ω–µ—Ä
- –•—É–¥–æ–∂–Ω–∏–∫
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä
"""
    await message.answer(text, parse_mode="Markdown")

@dp.message(F.text == "üìä –ë–∏–∑–Ω–µ—Å –∏ —ç–∫–æ–Ω–æ–º–∏–∫–∞")
async def business_faculties(message: types.Message):
    text = """
üìä *–ë–∏–∑–Ω–µ—Å –∏ —ç–∫–æ–Ω–æ–º–∏–∫–∞ - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏:*

üîπ *–≠–∫–æ–Ω–æ–º–∏–∫–∞*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –§–∏–Ω–∞–Ω—Å—ã –∏ –∫—Ä–µ–¥–∏—Ç
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 40
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 240+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 120 000‚ÇΩ/–≥–æ–¥
‚ñ´Ô∏è –ò–∑—É—á–∞–µ–º—ã–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã: –≠–∫–æ–Ω–æ–º–µ—Ç—Ä–∏–∫–∞, –±—É—Ö—É—á–µ—Ç

üîπ *–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å–æ–º
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 35
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 230+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 115 000‚ÇΩ/–≥–æ–¥
‚ñ´Ô∏è –ò–∑—É—á–∞–µ–º—ã–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã: –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥, —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç

üîπ *–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: IT-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 20
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 235+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 125 000‚ÇΩ/–≥–æ–¥

üéì *–ö–∞—Ä—å–µ—Ä–Ω—ã–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã:*
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫
- –ë–∏–∑–Ω–µ—Å-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç
- –ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å
- –ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤
"""
    await message.answer(text, parse_mode="Markdown")

@dp.message(F.text == "üåç –ì—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã–µ –Ω–∞—É–∫–∏")
async def humanities_faculties(message: types.Message):
    text = """
üåç *–ì—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã–µ –Ω–∞—É–∫–∏ - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏:*

üîπ *–ò—Å—Ç–æ—Ä–∏—è*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –û—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 25
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 210+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 85 000‚ÇΩ/–≥–æ–¥

üîπ *–§–∏–ª–æ—Å–æ—Ñ–∏—è*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 20
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 200+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 80 000‚ÇΩ/–≥–æ–¥

üîπ *–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –¢–µ–æ—Ä–∏—è —è–∑—ã–∫–∞
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 30
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 220+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 95 000‚ÇΩ/–≥–æ–¥

üéì *–ö–∞—Ä—å–µ—Ä–Ω—ã–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã:*
- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å
- –ü–µ—Ä–µ–≤–æ–¥—á–∏–∫
- –ù–∞—É—á–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
- –ñ—É—Ä–Ω–∞–ª–∏—Å—Ç
"""
    await message.answer(text, parse_mode="Markdown")

@dp.message(F.text == "üî¨ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞—É–∫–∏")
async def science_faculties(message: types.Message):
    text = """
üî¨ *–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞—É–∫–∏ - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏:*

üîπ *–ë–∏–æ–ª–æ–≥–∏—è*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –ì–µ–Ω–µ—Ç–∏–∫–∞
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 25
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 220+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 90 000‚ÇΩ/–≥–æ–¥

üîπ *–•–∏–º–∏—è*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∞—è —Ö–∏–º–∏—è
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 20
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 215+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 95 000‚ÇΩ/–≥–æ–¥

üîπ *–≠–∫–æ–ª–æ–≥–∏—è*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –ü—Ä–∏—Ä–æ–¥–æ–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 15
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 210+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 85 000‚ÇΩ/–≥–æ–¥

üéì *–ö–∞—Ä—å–µ—Ä–Ω—ã–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã:*
- –õ–∞–±–æ—Ä–∞–Ω—Ç
- –≠–∫–æ–ª–æ–≥
- –ù–∞—É—á–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å
"""
    await message.answer(text, parse_mode="Markdown")

@dp.message(F.text == "‚öñÔ∏è –Æ—Ä–∏—Å–ø—Ä—É–¥–µ–Ω—Ü–∏—è")
async def law_faculties(message: types.Message):
    text = """
‚öñÔ∏è *–Æ—Ä–∏—Å–ø—Ä—É–¥–µ–Ω—Ü–∏—è - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏:*

üîπ *–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –ø—Ä–∞–≤–æ*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–∞–≤–æ
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 30
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 250+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 130 000‚ÇΩ/–≥–æ–¥

üîπ *–£–≥–æ–ª–æ–≤–Ω–æ–µ –ø—Ä–∞–≤–æ*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –ö—Ä–∏–º–∏–Ω–∞–ª–∏—Å—Ç–∏–∫–∞
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 25
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 245+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 125 000‚ÇΩ/–≥–æ–¥

üîπ *–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–µ –ø—Ä–∞–≤–æ*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –î–∏–ø–ª–æ–º–∞—Ç–∏—è
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 20
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 255+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 140 000‚ÇΩ/–≥–æ–¥

üéì *–ö–∞—Ä—å–µ—Ä–Ω—ã–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã:*
- –Æ—Ä–∏—Å—Ç
- –ü—Ä–æ–∫—É—Ä–æ—Ä
- –°—É–¥—å—è
- –ù–æ—Ç–∞—Ä–∏—É—Å
"""
    await message.answer(text, parse_mode="Markdown")

@dp.message(F.text == "üè• –ú–µ–¥–∏—Ü–∏–Ω–∞")
async def medicine_faculties(message: types.Message):
    text = """
üè• *–ú–µ–¥–∏—Ü–∏–Ω–∞ - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏:*

üîπ *–õ–µ—á–µ–±–Ω–æ–µ –¥–µ–ª–æ*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –¢–µ—Ä–∞–ø–∏—è
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 50
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 260+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 150 000‚ÇΩ/–≥–æ–¥

üîπ *–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –•–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–∞—è —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 30
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 255+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 160 000‚ÇΩ/–≥–æ–¥

üîπ *–§–∞—Ä–º–∞—Ü–∏—è*
‚ñ´Ô∏è –ü—Ä–æ—Ñ–∏–ª—å: –§–∞—Ä–º–∞—Ü–µ–≤—Ç–∏—á–µ—Å–∫–∞—è —Ö–∏–º–∏—è
‚ñ´Ô∏è –ë—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç: 25
‚ñ´Ô∏è –ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 240+
‚ñ´Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å: 140 000‚ÇΩ/–≥–æ–¥

üéì *–ö–∞—Ä—å–µ—Ä–Ω—ã–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã:*
- –í—Ä–∞—á
- –§–∞—Ä–º–∞—Ü–µ–≤—Ç
- –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å
"""
    await message.answer(text, parse_mode="Markdown")

@dp.message(F.text.startswith("/ege "))
async def ege_calculator(message: types.Message):
    try:
        scores = list(map(int, message.text.split()[1:]))  
        total = sum(scores)
        await message.answer(f"üìä –í–∞—à–∏ –±–∞–ª–ª—ã: {total}\n\n–°—Ä–∞–≤–Ω–∏—Ç–µ —Å –ø—Ä–æ—Ö–æ–¥–Ω—ã–º–∏ –±–∞–ª–ª–∞–º–∏ –≤—ã—à–µ ‚¨ÜÔ∏è")
    except ValueError:
        await message.answer("‚ùå –û—à–∏–±–∫–∞! –í–≤–µ–¥–∏—Ç–µ –±–∞–ª–ª—ã —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä:\n`/ege 80 75 90`", parse_mode="Markdown")
# –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–æ–ª–µ–∑–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
@dp.message(F.text == "üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏")
async def useful_links(message: types.Message):
    links_text = """
üîó *–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –£–¥–ì–£:*

üìå [–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ –£–¥–ì–£](https://udsu.ru/admissions) - –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –∞–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤

üéì [–û–±—É—á–µ–Ω–∏–µ](https://udsu.ru/students) - —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

üî¨ [–ù–∞—É–∫–∞](https://udsu.ru/news/science) - –Ω–∞—É—á–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

üåê [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç](https://udsu.ru) - –≥–ª–∞–≤–Ω—ã–π –ø–æ—Ä—Ç–∞–ª —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞

üìö [–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞](https://library.udsu.ru) - —É—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

üè¢ [–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ](https://rasp.udsu.ru) - –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π
"""
    await message.answer(links_text, parse_mode="Markdown", disable_web_page_preview=True)
# –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
@dp.message(F.text == "üóì –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ")
async def schedule_info(message: types.Message):
    user_id = message.from_user.id
    if user_id in user_schedules:
        file_id = user_schedules[user_id]
        await message.answer_photo(file_id, caption="üìÖ –í–∞—à–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:")
    else:
        await message.answer("üìÖ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ, PDF –∏–ª–∏ —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ.")

@dp.message(F.photo | F.document)
async def save_schedule(message: types.Message):
    user_id = message.from_user.id
    if message.photo:
        file_id = message.photo[-1].file_id
        user_schedules[user_id] = file_id
        await message.answer("‚úÖ –§–æ—Ç–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –µ–≥–æ, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É 'üóì –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ'.")
    elif message.document:
        file_id = message.document.file_id
        user_schedules[user_id] = file_id
        await message.answer("‚úÖ PDF —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –µ–≥–æ, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É 'üóì –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ'.")
    else:
        await message.answer("‚ùå –û—à–∏–±–∫–∞! –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –∏–ª–∏ PDF.")
        # –î–æ–±–∞–≤–ª—è–µ–º –≤ —Ñ—É–Ω–∫—Ü–∏—é init_db —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
def init_db():
    conn = sqlite3.connect("reminders.db")
    cursor = conn.cursor()
    cursor.execute("""
    CREATE TABLE IF NOT EXISTS reminders (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        user_id INTEGER NOT NULL,
        date TEXT NOT NULL,
        text TEXT NOT NULL,
        notified INTEGER DEFAULT 0
    )
    """)
    cursor.execute("""
    CREATE TABLE IF NOT EXISTS schedules (
        user_id INTEGER PRIMARY KEY,
        file_id TEXT NOT NULL,
        file_type TEXT NOT NULL
    )
    """)
    conn.commit()
    conn.close()

# –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
@dp.message(F.text == "üóì –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ")
async def schedule_info(message: types.Message):
    conn = sqlite3.connect("reminders.db")
    cursor = conn.cursor()
    cursor.execute("SELECT file_id, file_type FROM schedules WHERE user_id = ?", (message.from_user.id,))
    schedule = cursor.fetchone()
    conn.close()
    
    if schedule:
        file_id, file_type = schedule
        if file_type == "photo":
            await message.answer_photo(file_id, caption="üìÖ –í–∞—à–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:")
        elif file_type == "document":
            await message.answer_document(file_id, caption="üìÖ –í–∞—à–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:")
    else:
        await message.answer("üìÖ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ, PDF –∏–ª–∏ —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ.")

# –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
@dp.message(F.photo | F.document)
async def save_schedule(message: types.Message):
    user_id = message.from_user.id
    conn = sqlite3.connect("reminders.db")
    cursor = conn.cursor()
    
    if message.photo:
        file_id = message.photo[-1].file_id
        file_type = "photo"
        cursor.execute(
            "INSERT OR REPLACE INTO schedules (user_id, file_id, file_type) VALUES (?, ?, ?)",
            (user_id, file_id, file_type)
        )
    elif message.document:
        file_id = message.document.file_id
        file_type = "document"
        cursor.execute(
            "INSERT OR REPLACE INTO schedules (user_id, file_id, file_type) VALUES (?, ?, ?)",
            (user_id, file_id, file_type)
        )
    else:
        await message.answer("‚ùå –û—à–∏–±–∫–∞! –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –∏–ª–∏ PDF.")
        conn.close()
        return
    
    conn.commit()
    conn.close()
    await message.answer("‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –µ–≥–æ, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É 'üóì –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ'.")

# –ù–æ–≤–æ—Å—Ç–∏ —Å —Å–∞–π—Ç–∞ –£–¥–ì–£
@dp.message(F.text == "üì¢ –ù–æ–≤–æ—Å—Ç–∏")
async def get_news(message: types.Message):
    try:
        url = "https://udsu.ru/news"
        headers = {
            "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
        }
        
        # –ü–æ–ª—É—á–∞–µ–º HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—É
        response = requests.get(url, headers=headers)
        response.raise_for_status()  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –æ—à–∏–±–∫–∏ HTTP
        
        # –ü–∞—Ä—Å–∏–º HTML
        soup = BeautifulSoup(response.text, 'html.parser')
        
        # –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–Ω—ã–µ –±–ª–æ–∫–∏ - —É—Ç–æ—á–Ω–µ–Ω–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä
        news_items = soup.select('.news-list .news-item')[:5]  # –ë–µ—Ä–µ–º 5 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
        
        if not news_items:
            await message.answer("‚ùå –ù–∞ —Å–∞–π—Ç–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –Ω–æ–≤–æ—Å—Ç–µ–π. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")
            return
        
        news_text = "üì∞ *–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –£–¥–ì–£:*\n\n"
        
        for item in news_items:
            # –ò–∑–≤–ª–µ–∫–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            title_element = item.select_one('.news-item__title a')
            if not title_element:
                continue
                
            title = title_element.get_text(strip=True)
            link = title_element['href']
            
            # –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞—Ç—É
            date_element = item.select_one('.news-item__date')
            date = date_element.get_text(strip=True) if date_element else "–î–∞—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞"
            
            # –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–ª–Ω—É—é —Å—Å—ã–ª–∫—É
            full_link = f"https://udsu.ru{link}" if link.startswith('/') else link
            
            news_text += f"üìÖ *{date}*\nüîπ [{title}]({full_link})\n\n"
        
        await message.answer(news_text, 
                           parse_mode="Markdown", 
                           disable_web_page_preview=True)
        
    except requests.RequestException as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –Ω–æ–≤–æ—Å—Ç–µ–π: {e}")
        await message.answer("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ —Å —Å–∞–π—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")
    except Exception as e:
        logger.error(f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –Ω–æ–≤–æ—Å—Ç–µ–π: {e}")
        await message.answer("‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –Ω–æ–≤–æ—Å—Ç–µ–π. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")

# –ú–µ–Ω—é —Å—Ç–æ–ª–æ–≤–æ–π
@dp.message(F.text == "üçΩ –ú–µ–Ω—é —Å—Ç–æ–ª–æ–≤–æ–π")
async def get_menu(message: types.Message):
    day = datetime.now().strftime("%A")
    if day == "Sunday":
        day = "–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ"
    
    day_translation = {
        "Monday": "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫",
        "Tuesday": "–í—Ç–æ—Ä–Ω–∏–∫",
        "Wednesday": "–°—Ä–µ–¥–∞",
        "Thursday": "–ß–µ—Ç–≤–µ—Ä–≥",
        "Friday": "–ü—è—Ç–Ω–∏—Ü–∞",
        "Saturday": "–°—É–±–±–æ—Ç–∞",
        "Sunday": "–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ"
    }
    
    current_day = day_translation.get(day, day)
    day_menu = menu.get(current_day, {})
    
    if not day_menu:
        await message.answer("‚ùå –ú–µ–Ω—é –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.")
        return
    
    text = f"üçΩ *–ú–µ–Ω—é —Å—Ç–æ–ª–æ–≤–æ–π –Ω–∞ {current_day}:*\n\n"
    
    text += "ü•§ *–ù–∞–ø–∏—Ç–∫–∏:*\n"
    for item in day_menu.get("–ù–∞–ø–∏—Ç–∫–∏", []):
        text += f"‚Ä¢ {item}\n"
    
    text += "\nüç≤ *–û—Å–Ω–æ–≤–Ω—ã–µ –±–ª—é–¥–∞:*\n"
    for item in day_menu.get("–ë–ª—é–¥–∞", []):
        text += f"‚Ä¢ {item}\n"
    
    text += "\nü•ê *–í—ã–ø–µ—á–∫–∞:*\n"
    for item in day_menu.get("–í—ã–ø–µ—á–∫–∞", []):
        text += f"‚Ä¢ {item}\n"
    
    await message.answer(text, parse_mode="Markdown")

# –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
@dp.message(F.text == "üîî –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è")
async def reminders_menu(message: types.Message):
    markup = ReplyKeyboardMarkup(
        keyboard=[
            [KeyboardButton(text="–î–æ–±–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ")],
            [KeyboardButton(text="–ú–æ–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è")],
            [KeyboardButton(text="–ù–∞–∑–∞–¥")]
        ],
        resize_keyboard=True
    )
    await message.answer("–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=markup)

@dp.message(F.text == "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ")
async def add_reminder_prompt(message: types.Message):
    await message.answer("üìÖ –í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É –∏ —Ç–µ–∫—Å—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n`–ì–ì–ì–ì-–ú–ú-–î–î –¢–µ–∫—Å—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è`\n\n–ü—Ä–∏–º–µ—Ä:\n`2025-05-20 –°–¥–∞—Ç—å –∫—É—Ä—Å–æ–≤—É—é —Ä–∞–±–æ—Ç—É`", parse_mode="Markdown")

@dp.message(F.text == "–ú–æ–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è")
async def show_reminders(message: types.Message):
    conn = sqlite3.connect("reminders.db")
    cursor = conn.cursor()
    cursor.execute("SELECT date, text FROM reminders WHERE user_id = ? ORDER BY date", (message.from_user.id,))
    reminders = cursor.fetchall()
    conn.close()
    
    if not reminders:
        await message.answer("–£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π.")
        return
    
    text = "üìÖ *–í–∞—à–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:*\n\n"
    for i, (date, reminder_text) in enumerate(reminders, 1):
        text += f"{i}. *{date}* - {reminder_text}\n"
    
    await message.answer(text, parse_mode="Markdown")

@dp.message(F.text == "–ù–∞–∑–∞–¥")
async def back_to_main(message: types.Message):
    await message.answer("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:", reply_markup=main_menu)

@dp.message(lambda message: len(message.text.split()) >= 2 and "-" in message.text)
async def add_reminder(message: types.Message):
    try:
        parts = message.text.split(" ", 1)
        date_str = parts[0]
        reminder_text = parts[1]
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞—Ç—ã
        datetime.strptime(date_str, "%Y-%m-%d")
        
        conn = sqlite3.connect("reminders.db")
        cursor = conn.cursor()
        cursor.execute(
            "INSERT INTO reminders (user_id, date, text) VALUES (?, ?, ?)",
            (message.from_user.id, date_str, reminder_text)
        )
        conn.commit()
        conn.close()
        
        await message.answer(f"‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ:\n–î–∞—Ç–∞: {date_str}\n–¢–µ–∫—Å—Ç: {reminder_text}")
    except ValueError as e:
        await message.answer(f"‚ùå –û—à–∏–±–∫–∞! –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:\n`–ì–ì–ì–ì-–ú–ú-–î–î –¢–µ–∫—Å—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è`\n\n–ü—Ä–∏–º–µ—Ä:\n`2025-05-20 –°–¥–∞—Ç—å –∫—É—Ä—Å–æ–≤—É—é`", parse_mode="Markdown")
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è: {e}")
        await message.answer("‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è.")

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
async def main():
    logger.info("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω üöÄ")
    # –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –≤ —Ñ–æ–Ω–µ
    asyncio.create_task(check_reminders())
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())